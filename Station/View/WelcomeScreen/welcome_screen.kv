<WelcomeScreen>:
    md_bg_color: 1, 1, 1, 1  # White background

    MDBoxLayout:
        orientation: 'vertical'
        padding: "40dp"
        spacing: "30dp"
        pos_hint: {"center_x": .5, "center_y": .5}

        # -- Logo Area Placeholder --
        Widget:
            size_hint_y: 0.45
            
        # --- Status Container (swaps between Text and Loading) ---
        MDBoxLayout:
            id: status_container
            orientation: 'vertical'
            size_hint_y: 0.4
            spacing: "10dp"
            pos_hint: {"center_x": .5}
            
            # STATE A: Normal Text (Default)
            MDBoxLayout:
                id: instruction_box
                orientation: 'vertical'
                opacity: 1  # Visible
                
                MDLabel:
                    text: "Checkout / Return Tools Here"
                    halign: "center"
                    font_style: "H4"
                    bold: True
                    theme_text_color: "Primary"
                    
                
                MDLabel:
                    text: "Please TAP your UNICARD to begin"
                    halign: "center"
                    font_style: "H5"
                    theme_text_color: "Secondary"
                    # pos_hint: {"top": 0.5, "center_x": .5}
                    
            # STATE B: Loading Animation (Hidden by default)
            MDBoxLayout:
                id: loading_box
                orientation: 'vertical'
                opacity: 0  # Hidden
                size_hint_y: None
                height: "0dp" # Collapse height so it doesn't take space
                spacing: "20dp"
                
                MDSpinner: 
                    id: loading_spinner
                    size_hint: None, None
                    size: "60dp", "60dp"
                    pos_hint: {'center_x': .5}
                    active: False # Stop animation by default
                    palette: [ [0.9, 0.17, 0.25, 1] ] # Red
                    
                MDLabel:
                    text: "Verifying User..."
                    halign: "center"
                    font_style: "H5"
                    theme_text_color: "Primary"

        # -- Spacer --
        Widget:
            size_hint_y: 0.15
            
        # -- Footer Buttons --
        MDBoxLayout:
            id: footer_buttons
            orientation: 'vertical'
            size_hint_y: 0.2
            spacing: "10dp"

            # -- DEV BUTTON --
            MDFillRoundFlatButton:
                text: "DEV - SCAN CARD"
                font_size: "20sp"
                size_hint: 0.4, 0.1
                pos_hint: {"center_x": .5}
                md_bg_color: 0.4, 0.4, 0.4, 1  # Red
                # move on to the next page
                on_release: root.go_to('action selection screen')

            # -- Manual Entry Button --
            MDFillRoundFlatButton:
                text: "MANUAL UCID ENTRY"
                font_size: "24sp"
                size_hint: 0.6, 0.1
                pos_hint: {"center_x": .5}
                md_bg_color: 0.9, 0.17, 0.25, 1  # Red
                on_release: root.go_to('manual entry screen')
            
            # Widget:
            #     size_hint_y: 0.01
